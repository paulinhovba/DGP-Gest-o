<!DOCTYPE html>
<html lang="pt-BR">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>DGP Empreendimentos</title>
      <meta name="author" content="Paulinho Monteiro">
      <meta name="description" content="">
      <!-- Tailwind -->
      <link href="https://unpkg.com/tailwindcss/dist/tailwind.min.css" rel="stylesheet">
      <link href="../../../css/style.css" rel="stylesheet">
   </head>
   <body class="bg-gray-100 flex">
      
      <!-- Inclusão de template EJS - Menu -->
      <%- include('menu.ejs') %>
      
      <!-- @end Menu Above Medium Screen -->
      <div class="flex-1 flex-col relative z-0 overflow-y-auto">        

      <div class="md:max-w-full md:mx-auto px-2 py-0">
         <div class="container mx-auto py-1 px-1">
         </div>            
         </div> 
         
         <div class="md:max-w-full md:mx-auto px-2 py-0">
          <form action="<%=host%>/cota/venda/<%=token%>/<%=id%>" method="post" class="p-10 bg-white rounded shadow-xl">
            <p class="text-lg text-green-800 font-medium pb-4">Venda de Cota</p>
            <div class="inline-block mt-2 w-1/2 pr-1">
               <label class="block text-md text-gray-600" for="cot_des">Descrição</label>
               <input class="w-full px-2 py-2 text-gray-700 bg-gray-200 rounded" id="cot_des" name="cot_des" type="text" required="" placeholder="Descricao" aria-label="Descricao" value ="<%=descricao%>" disabled>
            </div>
            <div class="inline-block mt-2 -mx-1 pl-1 w-1/2">
               <label class="block text-md text-gray-600" for="cot_val">Valor</label>
               <input class="w-full px-2  py-2 text-gray-700 bg-gray-200 rounded" id="cot_val" name="cot_val" type="text" required="" placeholder="Valor" aria-label="Valor" value ="<%=valor%>">
            </div>
            <div class="inline-block mt-2 w-1/2 pr-1">
               <label class="block text-md text-gray-600" for="cot_cli">Cliente</label>
               <select class="w-full px-2 py-2 text-gray-700 bg-gray-200 rounded" id="cot_cli" name="cot_cli" type="select" required="" placeholder="Cliente" aria-label="Cliente">
                  <option></option>
                  <%
                  var options = clientes;                 
                  for (var i = 0; i < options.length; i++)
                  {
                  %>
                  <option value="<%=options[i].id %>">
                     <%=options[ i ].nome %>
                  </option>
                  <%
                  }                
                  %>                      
               </select>
            </div>
            <div class="inline-block mt-2 -mx-1 pl-1 w-1/2">
               <label class=" block text-md text-gray-600" for="cot_emp">Empreendimento</label>
               <input class="w-full px-2 py-2 text-gray-700 bg-gray-200 rounded" id="cot_emp" name="cot_emp" type="text" required="" placeholder="Data" aria-label="Empreendimento" value ="<%=empreendimento%>" disabled>
            </div> 
            
            <div class="inline-block mt-2 w-1/2 pr-1">
              <label class="block text-md text-gray-600" for="cot_dat">Data</label>
              <input type="date" class="w-full px-2 py-2 text-gray-700 bg-gray-200 rounded" id="cot_dat" name="cot_dat" type="text" required="" placeholder="Data" aria-label="Data">
            </div>

            <div class="inline-block mt-2 -mx-1 pl-1 w-1/2">
               <label class=" block text-md text-gray-600" for="cot_cat">Categorias</label>
               <select class="slcon w-full px-2 py-2 text-gray-700 bg-gray-200 rounded" id="cot_cat" name="cot_cat" type="select" required="" placeholder="Categoria" aria-label="Categoria">
                  <option></option>
                  <%
                     var options = categorias;                 
                     for (var i = 0; i < options.length; i++)
                     {
                     %>
                     <option value="<%=options[i].id %>">
                        <%=options[ i ].descricao %>
                     </option>
                     <%
                     }                
                  %>
                 </select>
            </div>

            <div class="inline-block mt-2 w-1/2 pr-1">
               <label class=" block text-md text-gray-600" for="cot_con">Conta</label>
               <select class="slcon w-full px-2 py-2 text-gray-700 bg-gray-200 rounded" id="cot_con" name="cot_con" type="select" required="" placeholder="Conta" aria-label="Conta">
                  <option></option>
                  <%
                     var options = contas;                 
                     for (var i = 0; i < options.length; i++)
                     {
                     %>
                     <option value="<%=options[i].id %>">
                        <%=options[ i ].descricao %>
                     </option>
                     <%
                     }                
                  %>
                 </select>
            </div> 

            <div class="inline-block mt-2 -mx-1 pl-1 w-1/2">
               <label class=" block text-md text-gray-600" for="cot_cax">Caixa</label>
               <select class="slcax w-full px-2 py-2 text-gray-700 bg-gray-200 rounded" id="cot_cax" name="cot_cax" type="select" required="" placeholder="Caixa" aria-label="Caixa">
                  <option></option>
                  <%
                     var options = caixas;                 
                     for (var i = 0; i < options.length; i++)
                     {
                     %>
                     <option value="<%=options[i].id %>">
                        <%=options[ i ].descricao %>
                     </option>
                     <%
                     }                
                  %>
                 </select>
            </div>
            
            <div class="mt-4 flex justify-between">
              <a href="<%=host%>/cotas/<%= token %>"> 
                <div class="px-4 bg-indigo-400 p-3 rounded-lg text-white hover:bg-indigo-600">Cancelar</div>
              </a>
              <input id="btnvd" type="submit" value="Vender" class="px-4 bg-green-400 p-3 rounded-lg text-white hover:bg-indigo-600" style="visibility:visible">
              </div>
         </form>
        </div>
      </div>     

      <!-- AlpineJS -->
      <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
      <!-- Font Awesome -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js" integrity="sha256-KzZiKy0DWYsnwMF+X1DvQngQ2/FxF7MF3Ff72XcpuPs=" crossorigin="anonymous"></script>
      <!-- JQuery -->
      <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <!-- Local -->
      <script src="../../../js/functions.js"></script>

      <script> 

         $('#cot_val').keyup(function(){
         var v = $(this).val();
         v=v.replace(/\D/g,'');
         v=v.replace(/(\d{1,2})$/, ',$1');  
         v=v.replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');  
         v = v != ''?'R$ '+v:'';
         $(this).val(v);
         });

         $('#cot_val').focus(function(){
         var v = $(this).val();
         v=v.replace(/\D/g,'');
         v=v.replace(/(\d{1,2})$/, ',$1');  
         v=v.replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');  
         v = v != ''?'R$ '+v:'';
         $(this).val(v);
         });

      </script>

   </body>
</html>